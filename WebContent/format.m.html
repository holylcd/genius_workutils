<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link rel="icon" href="./favicon.ico" mce_href="./favicon.ico" type="image/x-icon"><title>SQL format | WorkUtils</title><style>#warp,html{height:100%}.content .middle,.footer{text-align:center}#author,#sourceCode,.content .middle .checkbox_div_remove_spaces input[name=remove_spaces],.content .middle .checkbox_div_scroll_sync input[name=scroll_sync]{cursor:pointer}body{background:url(images/background.png) center center/100% 100% no-repeat;height:97%}#warp{opacity:.97}.content{margin:10px 5% 0;display:flex;background:rgba(255,255,255,.5);height:98.5%;border-radius:5px}.content .left{width:43%;float:left}.content .middle{width:10%;float:left;padding:10px 2% 0;height:100%}.content .right{width:43%;float:left}.content .left textarea[name=left_textarea],.content .right textarea[name=right_textarea]{width:99%;border-radius:5px;font-size:14px;font-weight:500;font-family:Helvetica;height:100%;padding:0 3px}.content .middle input[name=prefix]{margin-top:120px}.content .middle input[name=suffix]{margin-top:15px}.content .middle input[name=prefix],.content .middle input[name=suffix]{width:100%;font-size:14px}.content .middle input[name=add],.content .middle input[name=remove],.content .middle input[name=resetLeftText],.content .middle input[name=resetRightText],.content .middle input[name=resetCache]{width:40%;margin-top:20px;cursor:pointer}.content .middle input[name=resetCache]{margin-top:40px}.content .middle .checkbox_div_remove_spaces{margin-top:20px}</style></head><body><div id="warp"><div class="content"><div class="left"><textarea name="left_textarea" id="left_textarea" onscroll="scrollSync(this)" onblur="recordTextareaUseInfo(this)" onkeypress="textAreaKeyEvent()" placeholder="demo"></textarea></div><div class="middle"><input name="prefix" id="prefix" placeholder="单行前缀" onkeyup="updateConfig(this)"> <input name="suffix" id="suffix" placeholder="单行后缀" onkeyup="updateConfig(this)"><div class="checkbox_div_remove_spaces"><label for="" style="font-size:14px">消除空格：</label><input type="checkbox" name="remove_spaces" id="remove_spaces" onclick="updateConfig(this)"></div><div class="checkbox_div_scroll_sync"><label for="" style="font-size:14px">滚动同步：</label><input type="checkbox" name="scroll_sync" id="scroll_sync" onclick="updateConfig(this)"></div><input name="resetCache" type="button" value="reset" title="重置使用习惯" onclick="resetCache()"><br><input name="resetLeftText" type="button" value="&lt;&lt;清空" onclick="clearText(0)"><br><input name="resetRightText" type="button" value="清空&gt;&gt;" onclick="clearText(1)"><br><input name="add" type="button" value="添加&gt;&gt;" onclick="add()" title="Ctrl+Shift+A"><br><input name="remove" type="button" value="&lt;&lt;移除" onclick="remove()" title="Ctrl+Shift+E"><br></div><div class="right"><textarea name="right_textarea" id="right_textarea" onscroll="scrollSync(this)" onblur="recordTextareaUseInfo(this)" onkeypress="textAreaKeyEvent()" placeholder="sql.append(&#34; demo &#34;);"></textarea></div></div><div class="footer"><font size="2"><author title="恭喜你发现了隐藏彩蛋" id="author" onclick="easterEgg()">holy</author>|<version>v_2.1.2</version>|<date>2018</date>|<label id="sourceCode" onclick="downloadSourceCode()" title="源码">Code</label></font></div></div><script>function add(){var e="",t=document.getElementById("left_textarea").value;t=sqlFormatCache.config.remove_spaces?t.trim():t,console.log("left_text: "+t),t=t.split("\n").forEach(function(t){0<t.trim().length&&(sqlFormatCache.config.remove_spaces&&(t=t.trim()),e+=sqlFormatCache.config.prefix+t+sqlFormatCache.config.suffix+"\n")}),document.getElementById("right_textarea").value=e.substring(0,e.length-1)}function remove(){var e="",t=document.getElementById("right_textarea").value;t=sqlFormatCache.config.remove_spaces?t.trim():t,console.log("right_text: "+t),t=t.split("\n").forEach(function(t){-1<t.indexOf(sqlFormatCache.config.prefix.trim())&&-1<t.indexOf(sqlFormatCache.config.suffix.trim())?t=t.replace(sqlFormatCache.config.prefix.trim(),"").replace(sqlFormatCache.config.suffix.trim(),""):0==t.trim().length?sqlFormatCache.config.remove_spaces&&(t=""):t="-- "+t,sqlFormatCache.config.remove_spaces&&(t=t.trim()),e+=t+"\n"}),document.getElementById("left_textarea").value=e.substring(0,e.length-1)}function clearText(e){0==e&&(document.getElementById("left_textarea").value=""),1==e&&(document.getElementById("right_textarea").value="")}function updateConfig(e){var t=e.name;switch(t){case"prefix":sqlFormatCache.config.prefix=e.value;break;case"suffix":sqlFormatCache.config.suffix=e.value;break;case"remove_spaces":sqlFormatCache.config.remove_spaces=e.checked;break;case"scroll_sync":sqlFormatCache.config.scroll_sync=e.checked;break;default:console.error("没有匹配该对象的事件")}}function scrollSync(e){if(sqlFormatCache.config.scroll_sync&&e==document.activeElement){var t="left_textarea"==e.name?"right_textarea":"left_textarea",a=document.getElementById(t);a.scrollTop=(a.scrollHeight-e.clientHeight)*e.scrollTop/(e.scrollHeight-e.clientHeight)}}function recordTextareaUseInfo(e){var t=sqlFormatCache.textarea_use_info[e.name+"_useTimes"];sqlFormatCache.textarea_use_info[e.name+"_useTimes"]=isNaN(Number(t))?0:++t}function setfocus(){var e=sqlFormatCache.textarea_use_info.left_textarea_useTimes,t=sqlFormatCache.textarea_use_info.right_textarea_useTimes;e>=t?document.getElementById("left_textarea").focus():document.getElementById("right_textarea").focus()}function setConfig(){document.getElementById("prefix").value=sqlFormatCache.config.prefix,document.getElementById("suffix").value=sqlFormatCache.config.suffix,document.getElementById("remove_spaces").checked=sqlFormatCache.config.remove_spaces,document.getElementById("scroll_sync").checked=sqlFormatCache.config.scroll_sync}function resetCache(){confirm("Are you sure to reset your usage habits?")&&(sqlFormatCache=storageUtil.initData,location.reload())}function init(){sqlFormatCache=storageUtil.getData("work_cache1205"),setfocus(),setConfig(),changeBackground(sqlFormatCache.config.background_url)}function close(){storageUtil.setData("work_cache1205",sqlFormatCache)}function textAreaKeyEvent(){var e;window.event?e=event.keyCode:event.which&&(e=event.which),event.ctrlKey&&event.shiftKey&&1==e&&add(),event.ctrlKey&&event.shiftKey&&5==e&&remove()}function changeBackground(e){null!=e&&(document.body.style.background="url("+e+")  center center / cover no-repeat")}function downloadSourceCode(e){var t=document.createElement("a");t.setAttribute("href","javascript:;"),t.setAttribute("target","_blank"),t.setAttribute("id","openwin"),document.body.appendChild(t),t.click()}function easterEgg(){var e=prompt("请输入背景图片的路径 (输入空值或取消，然后刷新，可以恢复默认值)","");e=null==e?null:e.replace(/\\/g,"/").trim(),""==e&&(e=null),sqlFormatCache.config.background_url=e,changeBackground(sqlFormatCache.config.background_url)}var sqlFormatCache,storageUtil={initData:{textarea_use_info:{left_textarea_useTimes:0,right_textarea_useTimes:0},config:{prefix:'sql.append(" ',suffix:' ");',remove_spaces:!0,scroll_sync:!0,background_url:null}},setData:function(e,t){"undefined"==typeof t||null==t?localStorage.setItem(e,JSON.stringify(this.initData)):localStorage.setItem(e,JSON.stringify(t))},getData:function(e){var t=localStorage.getItem(e);return"undefined"!=typeof t&&null!=t||(this.setData(e,null),t=localStorage.getItem(e)),JSON.parse(t||"{}")}};window.onload=init,window.onunload=close</script></body></html>